<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lucky Jet Сигналы</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

  <!-- ПРЕВЬЮ -->
  <div id="preview" onclick="startGame()">
    <img src="assets/preview.png" alt="Lucky Jet Preview" />
    <div class="play-btn">ИГРАТЬ</div>
  </div>

  <!-- ИГРА -->
  <div id="game" class="hidden">
    <img id="game-bg" src="assets/background.jpg" />
    <div id="stars"></div>
    <div id="clouds"></div>

    <div id="header-title">
      <img src="assets/luckyjet_text.svg" alt="Lucky Jet" />
    </div>

    <div id="preloader">
      <img src="assets/preloader.svg" class="loader" />
      <p>Загрузка...</p>
    </div>

    <div id="center-orbit">
      <!-- Коэффициент изначально пустой -->
      <div id="multiplier"></div>

      <div id="jetman-container">
        <img id="jetman" src="assets/jetman.png" />
        <img id="fire" src="assets/jetpack_fire.svg" />
      </div>
    </div>

    <button id="get-signal" onclick="generateSignal()">ПОЛУЧИТЬ СИГНАЛ</button>
  </div>

  <script>
    Telegram?.WebApp?.ready();
    Telegram?.WebApp?.expand();

    // ←←← ТЫ ЗАДАЁШЬ ПЕРВЫЙ КОЭФФИЦИЕНТ ЗДЕСЬ ←←←
    const FIRST_COEFF = 4.20;        // ← меняй на любое число (2.18, 6.66, 7.77 и т.д.)
    // ←←←

    let canGetSignal = true;
    let isFirstSignal = true;

    function startGame() {
      document.getElementById('preview').classList.add('hidden');
      document.getElementById('game').classList.remove('hidden');
      setTimeout(() => {
        document.getElementById('preloader').classList.add('hidden');
        document.getElementById('header-title').classList.remove('hidden');
      }, 3000);
    }

    function generateSignal() {
      if (!canGetSignal) return;

      canGetSignal = false;
      const btn = document.getElementById('get-signal');
      btn.textContent = "Проверка сигнала… 30";
      btn.style.background = "#666";
      btn.disabled = true;

      let seconds = 30;
      const timer = setInterval(() => {
        seconds--;
        btn.textContent = `Проверка сигнала… ${seconds}`;
        if (seconds <= 0) {
          clearInterval(timer);
          btn.textContent = "ПОЛУЧИТЬ СИГНАЛ";
          btn.style.background = "#9c27b0";
          btn.disabled = false;
          canGetSignal = true;
        }
      }, 1000);

      setTimeout(() => {
        let newCoeff;
        if (isFirstSignal) {
          newCoeff = FIRST_COEFF;           // первый — твой
          isFirstSignal = false;
        } else {
          newCoeff = (Math.random() * (8.30 - 1.10) + 1.10).toFixed(2); // остальные рандом
        }

        document.getElementById('multiplier').textContent = `x${Number(newCoeff).toFixed(2)}`;
        Telegram?.WebApp?.HapticFeedback?.impactOccurred('heavy');
        Telegram?.WebApp?.showAlert(`СИГНАЛ ГОТОВ!\nx${Number(newCoeff).toFixed(2)}\nСтавь быстро — Джетмен взлетает!`);
      }, 1500);
    }
  </script>
</body>
</html>
