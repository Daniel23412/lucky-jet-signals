<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Lucky Jet Сигналы</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>

  <!-- ПРЕВЬЮ -->
  <div id="preview" onclick="startGame()">
    <img src="assets/preview.png" alt="Lucky Jet Preview" />
    <div class="play-btn">ИГРАТЬ</div>
  </div>

  <!-- ИГРА -->
  <div id="game" class="hidden">
    <img id="game-bg" src="assets/background.jpg" />
    <div id="stars"></div>
    <div id="clouds"></div>

    <!-- Логотип сверху (уже опущен) -->
    <div id="header-title">
      <img src="assets/luckyjet_text.svg" alt="Lucky Jet" />
    </div>

    <!-- Прелоадер -->
    <div id="preloader">
      <img src="assets/preloader.svg" class="loader" />
      <p>Загрузка...</p>
    </div>

    <!-- Орбита -->
    <div id="center-orbit">
      <div id="multiplier">x2.18</div>
      <div id="jetman-container">
        <img id="jetman" src="assets/jetman.png" />
        <img id="fire" src="assets/jetpack_fire.svg" />
      </div>
    </div>

    <!-- Кнопка -->
    <button id="get-signal" onclick="generateSignal()">ПОЛУЧИТЬ СИГНАЛ</button>
  </div>

  <script>
    Telegram?.WebApp?.ready();
    Telegram?.WebApp?.expand();

    let currentCoeff = 2.18;
    let canGetSignal = true;

    function startGame() {
      document.getElementById('preview').classList.add('hidden');
      document.getElementById('game').classList.remove('hidden');
      setTimeout(() => {
        document.getElementById('preloader').classList.add('hidden');
        document.getElementById('header-title').classList.remove('hidden');
        updateCoeff(currentCoeff);
      }, 3000);
    }

    function generateSignal() {
      if (!canGetSignal) return;

      canGetSignal = false;
      const btn = document.getElementById('get-signal');
      btn.textContent = "Проверка сигнала… 30";
      btn.style.background = "#666";
      btn.disabled = true;

      let seconds = 30;
      const timer = setInterval(() => {
        seconds--;
        btn.textContent = `Проверка сигнала… ${seconds}`;
        if (seconds <= 0) {
          clearInterval(timer);
          btn.textContent = "ПОЛУЧИТЬ СИГНАЛ";
          btn.style.background = "#9c27b0";
          btn.disabled = false;
          canGetSignal = true;
        }
      }, 1000);

      // Сам сигнал через 1.5 сек
      setTimeout(() => {
        currentCoeff = (Math.random() * 13.5 + 1.5).toFixed(2);
        updateCoeff(currentCoeff);
        Telegram?.WebApp?.HapticFeedback?.impactOccurred('heavy');
        Telegram?.WebApp?.showAlert(`СИГНАЛ ГОТОВ!\nx${currentCoeff}\nСтавь быстро — забирай раньше чем указано!`);
      }, 1500);
    }

    function updateCoeff(coeff) {
      document.getElementById('multiplier').textContent = `x${Number(coeff).toFixed(2)}`;
    }
  </script>
</body>
</html>

